<div class="card card-bordered bg-base-100">
  <div class="card-body">
    <div class="flex justify-between items-start mb-4">
      <h3 class="card-title">Stack Manager Configuration</h3>
      <div class="flex gap-2">
        <%= link_to edit_stack_manager_path,
            class: "btn btn-sm btn-ghost",
            data: { turbo_frame: "current_account_stack_manager" } do %>
          <iconify-icon icon="lucide:edit"></iconify-icon>
          <span class="hidden md:inline">Edit</span>
        <% end %>
        <%= button_to stack_manager_path,
            method: :delete,
            class: "btn btn-sm btn-error btn-outline",
            data: {
              turbo_frame: "current_account_stack_manager",
              turbo_confirm: "Are you sure you want to remove this stack manager configuration?"
            } do %>
          <iconify-icon icon="lucide:trash"></iconify-icon>
          <span class="hidden md:inline">Delete</span>
        <% end %>
      </div>
    </div>
    
    <div class="space-y-4">
      <div>
        <div class="text-sm text-base-content/70">Type</div>
        <div class="font-medium"><%= stack_manager.stack_manager_type.humanize %></div>
      </div>

      <div>
        <div class="text-sm text-base-content/70">Role Based Access Control</div>
        <div class="font-medium">
          <% if stack_manager.enable_role_based_access_control %>
            <span class="badge badge-success">Enabled</span>
          <% else %>
            <span class="badge badge-ghost">Disabled</span>
          <% end %>
        </div>
      </div>

      <div>
        <div class="text-sm text-base-content/70">Provider URL</div>
        <div class="flex flex-wrap items-center gap-2">
          <div class="font-medium">
            <%= link_to stack_manager.provider_url,
                stack_manager.provider_url,
                target: "_blank",
                class: "link link-primary" %>
          </div>
          <%= button_to verify_connectivity_stack_manager_path,
              method: :post,
              class: "btn btn-ghost btn-sm",
              data: { turbo_frame: "test_connection_result" } do %>
            Test Connection <iconify-icon icon="lucide:refresh-cw"></iconify-icon>
          <% end %>
          <%= turbo_frame_tag "test_connection_result" %>
        </div>
      </div>
      
      <div>
        <div class="text-sm text-base-content/70">Configured</div>
        <div class="font-medium"><%= stack_manager.created_at.strftime("%B %d, %Y at %I:%M %p") %></div>
      </div>
    </div>

    <div class="divider"></div>

    <div class="flex justify-end">
      <%= button_to sync_clusters_stack_manager_path,
          method: :post,
          class: "btn btn-primary",
          data: { turbo_frame: "_top" } do %>
        <iconify-icon icon="lucide:refresh-cw"></iconify-icon>
        Sync Clusters
      <% end %>
    </div>
  </div>
</div>
